<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Gerard Valls - Nutrición Profesional</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet" />

<style>
  :root {
    --primary: #00ffc0;
    --primary-hover: #00e6b8;
    --dark-bg: #1a1f3f;
    --text-dark: #e6e6e6;
    --radius: 16px;
    --transition: 0.5s ease;
    --shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
  }
  * {
    box-sizing: border-box;
  }
  body {
    background: var(--dark-bg);
    color: var(--text-dark);
    font-family: 'Montserrat', sans-serif;
    margin: 0; 
    padding: 0 20px 50px;
    min-height: 100vh;
  }
  header {
    text-align: center;
    padding: 30px 0;
  }
  header h1 {
    font-size: 2.8rem;
    background: linear-gradient(90deg, #00ffc0, #00bfff, #ff00c8, #ffbf00);
    -webkit-background-clip: text;
    color: transparent;
  }
  nav {
    max-width: 600px;
    margin: 0 auto 30px;
  }
  .dropdown {
    position: relative;
    display: inline-block;
    width: 100%;
    max-width: 600px;
  }
  .dropbtn {
    width: 100%;
    background-color: var(--primary);
    color: #000;
    font-weight: 700;
    padding: 14px 20px;
    font-size: 1.2rem;
    border: none;
    border-radius: var(--radius);
    cursor: pointer;
    transition: background 0.3s;
    text-align: left;
  }
  .dropbtn:hover {
    background-color: var(--primary-hover);
  }
  .dropdown-content {
    display: none;
    position: absolute;
    background-color: rgba(42, 55, 96, 0.95);
    min-width: 100%;
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    z-index: 1000;
    margin-top: 6px;
  }
  .dropdown-content a {
    color: var(--text-dark);
    padding: 12px 20px;
    text-decoration: none;
    display: block;
    font-weight: 600;
    transition: background 0.3s;
  }
  .dropdown-content a:hover {
    background-color: var(--primary);
    color: #000;
  }
  .show {
    display: block;
  }

  main {
    max-width: 600px;
    margin: 0 auto;
  }
  section {
    background: rgba(42, 55, 96, 0.85);
    padding: 30px;
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    margin-bottom: 30px;
    display: none; /* ocultamos todas por defecto */
  }
  section.active {
    display: block;
  }
  h2 {
    text-align: center;
    margin-bottom: 30px;
  }
  /* Formularios y controles compartidos */
  form {
    display: flex;
    flex-direction: column;
    gap: 18px;
  }
  label {
    font-weight: 600;
    margin-bottom: 6px;
    display: block;
  }
  input, select, textarea {
    padding: 14px 18px;
    border-radius: 12px;
    border: none;
    font-size: 1rem;
  }
  textarea {
    resize: vertical;
  }
  button {
    background: var(--primary);
    color: #000;
    border: none;
    font-weight: 700;
    padding: 14px;
    border-radius: var(--radius);
    cursor: pointer;
    transition: background 0.3s;
  }
  button:hover {
    background: var(--primary-hover);
  }
  #resultado, #resultado-cal, #resultado-imc {
    margin-top: 30px;
    text-align: center;
    font-weight: 700;
    font-size: 1.2rem;
    background: var(--primary);
    color: #000;
    padding: 20px;
    border-radius: var(--radius);
    box-shadow: 0 8px 25px rgba(0, 255, 192, 0.5);
  }
  footer {
    text-align: center;
    padding: 15px 0;
    font-size: 0.9rem;
    opacity: 0.7;
  }
</style>
</head>
<body>

<header>
  <h1>Gerard Valls</h1>
  <p>Nutrición Profesional</p>
</header>

<nav>
  <div class="dropdown">
    <button onclick="toggleDropdown()" class="dropbtn" aria-haspopup="true" aria-expanded="false" id="dropbtn">
      Menú <i class="fa fa-caret-down"></i>
    </button>
    <div id="dropdown-content" class="dropdown-content" role="menu" aria-labelledby="dropbtn">
      <a href="#" role="menuitem" onclick="showSection('servicios')">Servicios</a>
      <a href="#" role="menuitem" onclick="showSection('testimonios')">Testimonios</a>
      <a href="#" role="menuitem" onclick="showSection('formulario')">Formulario</a>
      <a href="#" role="menuitem" onclick="showSection('calculadora')">Calculadora Nutricional</a>
      <a href="#" role="menuitem" onclick="showSection('imc')">Calculadora IMC</a>
    </div>
  </div>
</nav>

<main>
  <section id="servicios" class="active" tabindex="0">
    <h2>Servicios</h2>
    <p>Ofrecemos asesoramiento nutricional personalizado, planes de dieta, seguimiento y más.</p>
  </section>

  <section id="testimonios" tabindex="0">
    <h2>Testimonios</h2>
    <p>"Gracias a Gerard he mejorado mi salud y energía!" - Ana</p>
    <p>"Los planes de nutrición son claros y efectivos." - Carlos</p>
  </section>

  <section id="formulario" tabindex="0">
    <h2>Formulario de Contacto</h2>
    <form onsubmit="return enviarFormulario(event)">
      <label for="nombre">Nombre:</label>
      <input type="text" id="nombre" name="nombre" required />

      <label for="email">Email:</label>
      <input type="email" id="email" name="email" required />

      <label for="mensaje">Mensaje:</label>
      <textarea id="mensaje" name="mensaje" rows="4" required></textarea>

      <button type="submit">Enviar</button>
    </form>
  </section>

  <section id="calculadora" tabindex="0">
    <h2>Calculadora Nutricional</h2>
    <form onsubmit="calcularCalorias(event)">
      <label for="peso">Peso (kg):</label>
      <input type="number" id="peso" name="peso" step="0.1" min="20" max="300" required />

      <label for="altura">Altura (cm):</label>
      <input type="number" id="altura" name="altura" step="0.1" min="100" max="250" required />

      <label for="edad">Edad (años):</label>
      <input type="number" id="edad" name="edad" min="10" max="120" required />

      <label for="sexo">Sexo:</label>
      <select id="sexo" name="sexo" required>
        <option value="" disabled selected>Selecciona</option>
        <option value="masculino">Masculino</option>
        <option value="femenino">Femenino</option>
      </select>

      <label for="actividad">Nivel de actividad física:</label>
      <select id="actividad" name="actividad" required>
        <option value="" disabled selected>Selecciona</option>
        <option value="sedentario">Sedentario (poco o ningún ejercicio)</option>
        <option value="ligera">Ejercicio ligero (1-3 días/semana)</option>
        <option value="moderada">Ejercicio moderado (3-5 días/semana)</option>
        <option value="alta">Ejercicio intenso (6-7 días/semana)</option>
        <option value="extrema">Ejercicio muy intenso / trabajo físico</option>
      </select>

      <button type="submit">Calcular</button>
    </form>
    <div id="resultado-cal" aria-live="polite"></div>
  </section>

  <section id="imc" tabindex="0">
    <h2>Calculadora de IMC</h2>
    <form onsubmit="calcularIMC(event)">
      <label for="peso-imc">Peso (kg):</label>
      <input type="number" id="peso-imc" name="peso-imc" step="0.1" min="20" max="300" required />

      <label for="altura-imc">Altura (cm):</label>
      <input type="number" id="altura-imc" name="altura-imc" step="0.1" min="100" max="250" required />

      <button type="submit">Calcular IMC</button>
    </form>
    <div id="resultado-imc" aria-live="polite"></div>
  </section>
</main>

<footer>&copy; 2025 Gerard Valls | Nutrición Profesional</footer>

<script>
  // Control menú desplegable
  function toggleDropdown() {
    const dropdown = document.getElementById('dropdown-content');
    dropdown.classList.toggle('show');

    // Actualizar aria-expanded
    const btn = document.getElementById('dropbtn');
    const expanded = btn.getAttribute('aria-expanded') === 'true';
    btn.setAttribute('aria-expanded', !expanded);
  }

  // Cerrar dropdown si se clickea fuera
  window.onclick = function(event) {
    if (!event.target.matches('.dropbtn')) {
      const dropdowns = document.getElementsByClassName("dropdown-content");
      for (const dropdown of dropdowns) {
        if (dropdown.classList.contains('show')) {
          dropdown.classList.remove('show');
          document.getElementById('dropbtn').setAttribute('aria-expanded', false);
        }
      }
    }
  }

  // Mostrar solo la sección seleccionada
  function showSection(id) {
    const sections = document.querySelectorAll('main section');
    sections.forEach(sec => {
      sec.classList.remove('active');
      sec.setAttribute('tabindex', '-1'); // no accesible cuando oculto
    });
    const activeSection = document.getElementById(id);
    activeSection.classList.add('active');
    activeSection.setAttribute('tabindex', '0');
    activeSection.focus();

    // Cerrar menú después de seleccionar
    document.getElementById('dropdown-content').classList.remove('show');
    document.getElementById('dropbtn').setAttribute('aria-expanded', false);
  }

  // Formularios

  // Enviar formulario contacto (simulación)
  function enviarFormulario(e) {
    e.preventDefault();
    alert('Formulario enviado. ¡Gracias por contactarnos!');
    e.target.reset();
  }

  // Calculadora Nutricional
  function calcularCalorias(e) {
    e.preventDefault();

    const peso = parseFloat(document.getElementById('peso').value);
    const altura = parseFloat(document.getElementById('altura').value);
    const edad = parseInt(document.getElementById('edad').value);
    const sexo = document.getElementById('sexo').value;
    const actividad = document.getElementById('actividad').value;

    if (!peso || !altura || !edad) {
      alert('Por favor, completa todos los campos.');
      return;
    }

    let tmb;
    if(sexo === 'masculino') {
      tmb = 88.36 + (13.4 * peso) + (4.8 * altura) - (5.7 * edad);
    } else {
      tmb = 447.6 + (9.2 * peso) + (3.1 * altura) - (4.3 * edad);
    }

    const factores = {
      'sedentario': 1.2,
      'ligera': 1.375,
      'moderada': 1.55,
      'alta': 1.725,
      'extrema': 1.9
    };

    const calorias = tmb * factores[actividad];

    document.getElementById('resultado-cal').textContent = `Tu requerimiento calórico diario estimado es de ${calorias.toFixed(0)} kcal.`;
  }

  // Calculadora IMC
  function calcularIMC(e) {
    e.preventDefault();

    const peso = parseFloat(document.getElementById('peso-imc').value);
    const alturaCm = parseFloat(document.getElementById('altura-imc').value);

    if (!peso || !alturaCm) {
      alert('Por favor, completa todos los campos.');
      return;
    }

    const alturaM = alturaCm / 100;
    const imc = peso / (alturaM * alturaM);

    let categoria = '';
    if(imc < 18.5) categoria = 'Bajo peso';
    else if(imc < 25) categoria = 'Normal';
    else if(imc < 30) categoria = 'Sobrepeso';
    else categoria = 'Obesidad';

    document.getElementById('resultado-imc').textContent = `Tu IMC es ${imc.toFixed(1)} (${categoria}).`;
  }
</script>

</body>
</html>
