<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gerard Valls - Nutrición Profesional</title>

<!-- Fuente -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">

<!-- Font Awesome CSS -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

<!-- GSAP -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/gsap.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.13.0/ScrollTrigger.min.js" defer></script>

<style>
/* ... (tu CSS original completo) ... */

/* NUEVO: sección de estadísticas */
#estadisticas .stats{
  display:flex; justify-content:space-around; flex-wrap:wrap;
  margin-top:20px; font-size:1.5rem;
}
#estadisticas .counter{font-weight:bold;color:var(--primary);}

/* NUEVO: calculadora */
.calculator {
  background:rgba(255,255,255,0.05);
  backdrop-filter:blur(15px) saturate(180%);
  border:1px solid rgba(255,255,255,0.2);
  border-radius:var(--radius);
  padding:20px;
  margin-top:20px;
}
body.light .calculator {
  background:rgba(255,255,255,0.25);
  border:1px solid rgba(0,0,0,0.2);
}
.calculator input, .calculator select {
  width:100%; padding:10px; margin:5px 0 10px;
  border-radius:var(--radius); border:1px solid rgba(255,255,255,0.3);
}
body.light .calculator input, body.light .calculator select {
  border:1px solid rgba(0,0,0,0.3);
}
</style>
</head>
<body>

<header>
<h1>Gerard Valls</h1>
<p>Nutrición personalizada para deportistas y personas activas</p>
<button id="toggle-theme">Cambiar a modo claro</button>
</header>

<nav>
<a href="#servicios">Servicios</a>
<a href="#estadisticas">Resultados</a>
<a href="#testimonios">Testimonios</a>
<a href="#consulta">Formulario</a>
<a href="#calculadora">Calculadora</a>
</nav>

<main class="wrapper">
<section id="servicios">
  <h2>Servicios</h2>
  <!-- ... (tus servicios) ... -->
</section>

<!-- NUEVO: sección de estadísticas -->
<section id="estadisticas">
  <h2>Resultados</h2>
  <div class="stats">
    <div><span class="counter" data-target="150">0</span>+ Clientes</div>
    <div><span class="counter" data-target="300">0</span>+ Planes creados</div>
    <div><span class="counter" data-target="95">0</span>% Satisfacción</div>
  </div>
</section>

<section id="testimonios">
  <h2>Testimonios</h2>
  <!-- ... (tus testimonios) ... -->
</section>

<section id="consulta">
  <h2>Formulario de contacto</h2>
  <!-- ... (tu formulario) ... -->
</section>

<!-- NUEVO: Calculadora de calorías -->
<section id="calculadora">
  <h2>Calculadora de Calorías</h2>
  <div class="calculator">
    <label>Peso (kg):</label>
    <input type="number" id="peso" required>
    <label>Altura (cm):</label>
    <input type="number" id="altura" required>
    <label>Edad:</label>
    <input type="number" id="edad" required>
    <label>Sexo:</label>
    <select id="sexo">
      <option value="hombre">Hombre</option>
      <option value="mujer">Mujer</option>
    </select>
    <label>Actividad:</label>
    <select id="actividad">
      <option value="1.2">Sedentario</option>
      <option value="1.375">Ligero (1-3 días)</option>
      <option value="1.55">Moderado (3-5 días)</option>
      <option value="1.725">Intenso (6-7 días)</option>
      <option value="1.9">Muy intenso</option>
    </select>
    <button id="calcular-btn">Calcular</button>
    <p id="resultado"></p>
  </div>
</section>

</main>

<footer>&copy; 2025 Gerard Valls - Todos los derechos reservados.</footer>

<button id="whatsapp-btn" aria-label="Abrir chat de WhatsApp"><i class="fab fa-whatsapp"></i></button>
<button id="scrollTopBtn" aria-label="Subir al inicio"><i class="fas fa-arrow-up"></i></button>

<script defer>
/* Guardar preferencia de tema */
const themeBtn=document.getElementById('toggle-theme');
if(localStorage.getItem('theme')==='light'){
  document.body.classList.add('light');
  themeBtn.textContent='Cambiar a modo oscuro';
}
themeBtn.addEventListener('click',()=>{
  document.body.classList.toggle('light');
  localStorage.setItem('theme',document.body.classList.contains('light')?'light':'dark');
  themeBtn.textContent=document.body.classList.contains('light')?'Cambiar a modo oscuro':'Cambiar a modo claro';
});

/* GSAP animaciones */
window.addEventListener('DOMContentLoaded',()=>{
  gsap.from("header h1",{opacity:0,y:-50,duration:1});
  gsap.from("header p",{opacity:0,y:30,duration:1,delay:0.3});
  gsap.utils.toArray(".service").forEach((el,i)=>{
    gsap.from(el,{scrollTrigger:{trigger:el,start:"top 80%"},opacity:0,y:50,duration:0.6,delay:i*0.1});
  });
});

/* Scroll top */
const scrollBtn=document.getElementById("scrollTopBtn");
window.addEventListener("scroll",()=>{window.scrollY>300?scrollBtn.classList.add("show"):scrollBtn.classList.remove("show");});
scrollBtn.addEventListener("click",()=>window.scrollTo({top:0,behavior:"smooth"}));

/* WhatsApp */
document.getElementById("whatsapp-btn").addEventListener("click",()=>{window.open("https://wa.me/34600000000","_blank");});

/* Validación avanzada de formulario + feedback */
const form=document.getElementById('contact-form');
form.addEventListener('submit',async e=>{
  e.preventDefault();
  const email=form.email.value;
  const name=form.name.value.trim();
  if(name.length<3){
    document.getElementById("form-feedback").textContent="Por favor ingresa un nombre válido.";
    return;
  }
  if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)){
    document.getElementById("form-feedback").textContent="Correo no válido.";
    return;
  }
  try{
    const r=await fetch(form.action,{method:'POST',body:new FormData(form)});
    document.getElementById('form-feedback').textContent=r.ok?"Mensaje enviado con éxito":"Error al enviar el mensaje";
    if(r.ok) form.reset();
  }catch{
    document.getElementById('form-feedback').textContent="Hubo un error.";
  }
});

/* Testimonios auto-scroll (igual que antes) */
/* ... (tu código de carrusel de testimonios) ... */

/* Contadores animados */
document.addEventListener("DOMContentLoaded",()=>{
  const counters=document.querySelectorAll(".counter");
  counters.forEach(counter=>{
    let target=+counter.getAttribute("data-target");
    let count=0;
    const update=()=>{
      count+=Math.ceil(target/80);
      if(count<target){
        counter.textContent=count;
        requestAnimationFrame(update);
      }else{
        counter.textContent=target;
      }
    };
    update();
  });
});

/* Calculadora de calorías */
document.getElementById("calcular-btn").addEventListener("click",()=>{
  const peso=+document.getElementById("peso").value;
  const altura=+document.getElementById("altura").value;
  const edad=+document.getElementById("edad").value;
  const sexo=document.getElementById("sexo").value;
  const actividad=+document.getElementById("actividad").value;
  if(!peso||!altura||!edad) return alert("Completa todos los campos");
  let tmb=sexo==="hombre"
    ? 88.36+(13.4*peso)+(4.8*altura)-(5.7*edad)
    : 447.6+(9.2*peso)+(3.1*altura)-(4.3*edad);
  const calorias=(tmb*actividad).toFixed(0);
  document.getElementById("resultado").textContent=`Necesitas aprox. ${calorias} kcal/día para mantener tu peso.`;
});
</script>

</body>
</html>
