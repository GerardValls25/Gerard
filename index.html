<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gerard Valls - Nutrición Personalizada</title>
  <style>
    body {
      margin: 0;
      padding-top: 90px;
      font-family: Arial, sans-serif;
      color: #0b0f2f;
      background: #0b0f2f;
    }
    #particles-js {
      position: fixed;
      width: 100%;
      height: 100%;
      background: #0b0f2f;
      top: 0;
      left: 0;
      z-index: -1;
    }
    .encabezado {
      position: fixed;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      background-color: #ffffffdd;
      backdrop-filter: blur(8px);
      padding: 15px 25px;
      border-radius: 0 0 12px 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      max-width: 800px;
      width: 90%;
      margin: 0 auto;
      display: flex;
      align-items: center;
      gap: 30px;
      text-align: left;
      z-index: 1000;
      flex-direction: row;
      animation: slideFadeIn 0.6s ease forwards;
      transition: top 0.3s ease;
    }
    .logo {
      height: 40px;
      width: auto;
      flex-shrink: 0;
    }
    .encabezado h1 {
      font-size: 1.6rem;
      color: #0b0f2f;
      margin: 0;
    }
    @keyframes slideFadeIn {
      0% {
        opacity: 0;
        transform: translate(-50%, -30px);
      }
      100% {
        opacity: 1;
        transform: translate(-50%, 0);
      }
    }
    @media (max-width: 600px) {
      .encabezado {
        flex-direction: column;
        text-align: center;
        padding: 10px 20px;
        border-radius: 0 0 12px 12px;
      }
      .logo {
        height: 50px;
        margin-bottom: 10px;
      }
      .encabezado h1 {
        font-size: 1.4rem;
      }
    }
    /* Panel de control para partículas */
    #control-panel {
      position: fixed;
      top: 110px;
      right: 20px;
      background: rgba(255 255 255 / 0.9);
      padding: 15px 20px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      max-width: 250px;
      font-size: 14px;
      color: #0b0f2f;
      z-index: 1100;
    }
    #control-panel label {
      display: block;
      margin-top: 10px;
      font-weight: 600;
    }
    #control-panel select,
    #control-panel input[type="color"],
    #control-panel input[type="range"],
    #control-panel input[type="number"] {
      width: 100%;
      margin-top: 5px;
      padding: 4px 6px;
      border-radius: 5px;
      border: 1px solid #aaa;
      box-sizing: border-box;
    }
  </style>
</head>
<body>

<div id="particles-js"></div>

<header class="encabezado">
  <img src="gerard.jpg" alt="Logo Gerard Valls" class="logo" />
  <h1>Gerard Valls - Nutrición Personalizada</h1>
</header>

<div id="control-panel">
  <h3>Configura Partículas</h3>
  <label for="color">Color:</label>
  <input type="color" id="color" value="#FFD700" />
  
  <label for="shape">Forma:</label>
  <select id="shape">
    <option value="circle">Círculo</option>
    <option value="edge">Cuadrado</option>
    <option value="triangle">Triángulo</option>
    <option value="star" selected>Estrella</option>
    <option value="polygon">Polígono</option>
  </select>
  
  <label for="size">Tamaño:</label>
  <input type="range" id="size" min="1" max="10" value="4" />
  
  <label for="speed">Velocidad:</label>
  <input type="range" id="speed" min="0.5" max="10" step="0.1" value="3" />
  
  <label for="count">Cantidad:</label>
  <input type="number" id="count" min="10" max="200" value="80" />
</div>

<main>
  <section>
    <p>Contenido de ejemplo debajo del encabezado fijo.</p>
  </section>
</main>

<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
<script>
  // Configuración inicial
  let config = {
    particles: {
      number: { value: 80, density: { enable: true, value_area: 900 } },
      color: { value: "#FFD700" },
      shape: { type: "star", stroke: { width: 0, color: "#000000" }, polygon: { nb_sides: 5 } },
      opacity: { value: 0.6, random: false },
      size: { value: 4, random: true },
      move: { enable: true, speed: 3, direction: "none", random: false, straight: false, out_mode: "out", bounce: false }
    },
    interactivity: {
      detect_on: "canvas",
      events: { onhover: { enable: true, mode: "grab" }, onclick: { enable: true, mode: "push" }, resize: true },
      modes: {
        grab: { distance: 150, line_linked: { opacity: 0.6 } },
        bubble: { distance: 200, size: 8, duration: 2, opacity: 0.8, speed: 3 },
        repulse: { distance: 100, duration: 0.4 },
        push: { particles_nb: 4 },
        remove: { particles_nb: 2 }
      }
    },
    retina_detect: true
  };

  // Inicializa partículas
  function loadParticles() {
    particlesJS("particles-js", config);
  }
  loadParticles();

  // Control panel elements
  const colorInput = document.getElementById('color');
  const shapeSelect = document.getElementById('shape');
  const sizeInput = document.getElementById('size');
  const speedInput = document.getElementById('speed');
  const countInput = document.getElementById('count');

  // Actualiza la configuración y recarga partículas
  function updateParticles() {
    config.particles.color.value = colorInput.value;
    config.particles.shape.type = shapeSelect.value;
    config.particles.size.value = parseFloat(sizeInput.value);
    config.particles.move.speed = parseFloat(speedInput.value);
    config.particles.number.value = parseInt(countInput.value, 10);

    // Recarga particles.js (para evitar que se acumulen varias instancias)
    if(window.pJSDom && window.pJSDom.length > 0) {
      window.pJSDom[0].pJS.fn.vendors.destroypJS();
      window.pJSDom = [];
    }
    loadParticles();
  }

  // Escucha cambios en los controles
  colorInput.addEventListener('input', updateParticles);
  shapeSelect.addEventListener('change', updateParticles);
  sizeInput.addEventListener('input', updateParticles);
  speedInput.addEventListener('input', updateParticles);
  countInput.addEventListener('input', updateParticles);

  // Header ocultar/mostrar en scroll
  let lastScrollTop = 0;
  const header = document.querySelector('.encabezado');

  window.addEventListener('scroll', () => {
    let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
    if (scrollTop > lastScrollTop && scrollTop > 100) {
      header.style.top = '-100px';
    } else {
      header.style.top = '0';
    }
    lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
  });
</script>

</body>
</html>
