<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gerard Valls - Nutrici√≥n Profesional ULTRA PREMIUM</title>
<meta name="description" content="Pierde grasa y gana m√∫sculo con planes personalizados y asesor√≠a profesional de Gerard Valls. Resultados sostenibles y medibles.">

<!-- Fonts & Icons -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

<!-- GSAP -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.14.1/gsap.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.14.1/ScrollTrigger.min.js" defer></script>

<!-- Three.js -->
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/controls/OrbitControls.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/postprocessing/EffectComposer.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/postprocessing/RenderPass.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/postprocessing/UnrealBloomPass.js"></script>

<!-- Stripe -->
<script src="https://js.stripe.com/v3/"></script>

<style>
:root {
  --primary: #00ffc0;
  --secondary: #ffbf00;
  --darkbg: #1a1f3f;
  --text-light: #e6e6e6;
  --radius: 20px;
  --transition: 0.4s ease;
  --card-bg: rgba(255,255,255,0.05);
  --card-shadow: 0 12px 40px rgba(0,0,0,0.55);
}
* { box-sizing: border-box; margin:0; padding:0; }
body { font-family: 'Montserrat', sans-serif; background: var(--darkbg); color: var(--text-light); line-height:1.5; overflow-x:hidden; }
a { text-decoration:none; color: var(--primary); transition: var(--transition); }
a:hover { color: var(--secondary); }
canvas { position: fixed; top:0; left:0; width:100%; height:100%; z-index:-1; }

/* MEN√ö SUPERIOR NE√ìN */
#main-nav {
  position: fixed;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 95%;
  max-width: 1200px;
  background: rgba(10,10,25,0.6);
  backdrop-filter: blur(15px);
  border-radius: 15px;
  box-shadow: 0 4px 20px rgba(0,255,192,0.3);
  z-index: 1000;
}
#main-nav ul {
  display:flex;
  justify-content: space-around;
  list-style: none;
  padding: 10px 0;
  margin:0;
}
.neon-link {
  color: #00ffc0;
  font-weight:600;
  font-size:0.95rem;
  padding:6px 12px;
  border-radius:10px;
  text-shadow:
     0 0 5px #00ffc0,
     0 0 10px #00ffc0,
     0 0 20px #00ffc0,
     0 0 40px #00bfff,
     0 0 80px #00bfff;
  transition: all 0.3s ease-in-out;
  position: relative;
  animation: neon-flicker 2.5s infinite;
}
.neon-link:hover {
  color: #ffbf00;
  text-shadow:
     0 0 5px #ffbf00,
     0 0 10px #ffbf00,
     0 0 20px #ffbf00,
     0 0 40px #ffbf00,
     0 0 80px #ffbf00;
  background: rgba(0,0,0,0.2);
}
@keyframes neon-flicker {
  0%, 18%, 22%, 25%, 53%, 57%, 100% { text-shadow: 
    0 0 5px #00ffc0,
    0 0 10px #00ffc0,
    0 0 20px #00ffc0,
    0 0 40px #00bfff,
    0 0 80px #00bfff;
  }
  20%, 24%, 55% { text-shadow: none; color:#00ffc0; }
}

/* Secciones */
section {
  max-width: 1100px;
  margin: 100px auto;
  padding: 60px 30px;
  border-radius: var(--radius);
  backdrop-filter: blur(12px);
  background: var(--card-bg);
  box-shadow: var(--card-shadow);
}

/* Header */
header { text-align:center; padding:120px 20px 50px; }
header img { width:120px; border-radius:50%; box-shadow:0 10px 25px rgba(0,0,0,0.5); margin-bottom:20px; }
header h1 { font-size:2.2rem; background: linear-gradient(90deg, #00ffc0,#00bfff,#ff00c8,#ffbf00); -webkit-background-clip:text; color:transparent; text-shadow:0 0 15px rgba(0,255,192,0.3); margin-bottom:10px; line-height:1.2; }
header p { font-size:1rem; max-width:600px; margin:auto; opacity:0; transform:translateY(20px); animation: fadeInUp 1s forwards 0.5s; }
header .cta { margin-top:25px; display:flex; justify-content:center; gap:20px; flex-wrap:wrap; }
header .cta button, header .cta a { padding:12px 28px; border-radius: var(--radius); font-weight:600; cursor:pointer; transition: var(--transition); font-size:0.95rem; }
header .cta button { background: var(--secondary); color:#000; border:none; }
header .cta button:hover { background: var(--primary); transform:translateY(-2px); box-shadow:0 5px 15px rgba(0,255,192,0.3);}
header .cta a { border:2px solid var(--primary); color: var(--primary); }
header .cta a:hover { background: var(--primary); color:#000; box-shadow:0 5px 15px rgba(0,255,192,0.3); }

/* Grid cards */
.grid {
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(220px,1fr));
  gap:25px;
}
.grid .card {
  padding:20px;
  border-radius: var(--radius);
  background: var(--card-bg);
  backdrop-filter:blur(12px);
  box-shadow: var(--card-shadow);
  text-align:center;
  transition: var(--transition);
  display:flex;
  flex-direction:column;
  justify-content:center;
}
.grid .card:hover {
  transform:translateY(-5px) scale(1.02);
  box-shadow:0 16px 45px rgba(0,0,0,0.6);
}
.grid .card i { font-size:2rem; margin-bottom:10px; }
.grid .card h3 { font-size:1.15rem; margin-bottom:6px; font-weight:600; }
.grid .card p { font-size:0.9rem; opacity:0.85; line-height:1.4; }

/* Footer */
footer { text-align:center; padding:30px; font-size:0.85rem; opacity:0.7; }

/* Animaciones */
@keyframes fadeInUp { to { opacity:1; transform:translateY(0); } }

/* Suscripciones premium */
.subscription-card {
  background: linear-gradient(145deg, rgba(0,255,192,0.05), rgba(0,191,255,0.1));
  border-radius: var(--radius);
  padding: 25px;
  text-align: center;
  box-shadow: 0 0 25px rgba(0,255,192,0.4), 0 0 50px rgba(0,191,255,0.3);
  transition: all 0.3s ease;
}
.subscription-card:hover {
  transform: translateY(-5px) scale(1.02);
  box-shadow: 0 0 35px rgba(0,255,192,0.6), 0 0 60px rgba(0,191,255,0.5);
}
.subscription-card h3 {
  font-size:1.2rem;
  margin-bottom:10px;
  font-weight:700;
  background: linear-gradient(90deg, #00ffc0,#00bfff,#ff00c8,#ffbf00);
  -webkit-background-clip: text;
  color: transparent;
}
.subscription-card button {
  margin-top:15px;
  padding:12px 20px;
  border-radius: var(--radius);
  font-weight:600;
  color:#000;
  background:#ffbf00;
  border:none;
  cursor:pointer;
  box-shadow: 0 0 15px #ffbf00, 0 0 30px #ffbf00 inset;
  transition: all 0.3s ease-in-out;
  animation: pulse 2s infinite;
}
.subscription-card button:hover {
  background: #00ffc0;
  box-shadow: 0 0 25px #00ffc0, 0 0 50px #00bfff inset;
  transform: scale(1.05);
}
.subscription-card.premium {
  transform: scale(1.05);
  border: 2px solid #00ffc0;
  box-shadow: 0 0 35px #00ffc0, 0 0 70px #00bfff inset;
  animation: neonGlow 2.5s infinite alternate;
}
@keyframes neonGlow {
  0% { box-shadow: 0 0 20px #00ffc0, 0 0 50px #00bfff inset; }
  50% { box-shadow: 0 0 40px #00ffc0, 0 0 80px #00bfff inset; }
  100% { box-shadow: 0 0 20px #00ffc0, 0 0 50px #00bfff inset; }
}

/* Responsivo */
@media(max-width:768px){
  header h1 { font-size:1.8rem; }
  header p { font-size:0.95rem; }
  .grid { gap:15px; }
  .grid .card { padding:15px; }
}

/* Modal Premium Unificado */
.premium-modal {
  background: rgba(17,17,17,0.9);
  padding:30px;
  border-radius: var(--radius);
  width:90%;
  max-width:400px;
  display:flex;
  flex-direction:column;
  gap:15px;
  box-shadow: 0 0 25px #00ffc0, 0 0 50px #00bfff inset;
  border: 2px solid #00ffc0;
  position: relative;
  animation: neonBorder 2.5s infinite alternate;
  transition: transform 0.3s ease, opacity 0.3s ease;
}
@keyframes neonBorder {
  0% { box-shadow: 0 0 20px #00ffc0, 0 0 40px #00bfff inset; border-color: #00ffc0; }
  50% { box-shadow: 0 0 35px #00ffc0, 0 0 70px #00bfff inset; border-color: #00bfff; }
  100% { box-shadow: 0 0 20px #00ffc0, 0 0 40px #00bfff inset; border-color: #00ffc0; }
}
.premium-modal h3 { text-align:center; font-size:1.5rem; background: linear-gradient(90deg, #00ffc0,#00bfff,#ff00c8,#ffbf00); -webkit-background-clip:text; color:transparent; margin-bottom:10px; }
.premium-modal input { padding:10px; border-radius: var(--radius); border:none; background: rgba(255,255,255,0.1); color:#fff; font-size:0.95rem; transition: 0.3s; }
.premium-modal input:focus { outline:2px solid #00ffc0; background: rgba(255,255,255,0.15); }
.premium-modal button[type="submit"] { padding:12px 20px; border:none; border-radius: var(--radius); background:#ffbf00; color:#000; font-weight:700; cursor:pointer; box-shadow: 0 0 15px #ffbf00, 0 0 30px #ffbf00 inset; transition: all 0.3s ease-in-out; animation: pulse 2s infinite; }
.premium-modal button[type="submit"]:hover { background: #00ffc0; box-shadow: 0 0 25px #00ffc0, 0 0 50px #00bfff inset; transform: scale(1.05); }
.premium-modal button#close-unificado { padding:8px; border:none; border-radius: var(--radius); background: rgba(255,0,0,0.5); color:#fff; cursor:pointer; }
</style>
</head>
<body>

<!-- Header -->
<header id="header">
  <img src="gerard.jpg" alt="Gerard Valls, especialista en nutrici√≥n profesional">
  <h1>Pierde grasa y gana m√∫sculo sin dejar de comer lo que m√°s te gusta</h1>
  <p>M√©todo estrat√©gico basado en evidencia cient√≠fica para resultados reales y sostenibles.</p>
  <div class="cta">
    <button id="cta-reserva">EMPEZAR MI CAMBIO AHORA</button>
    <a href="#servicios" class="neon-link">VER PROGRAMAS</a>
    <a href="calculadora.html" class="neon-link">Calculadora</a>
    <a href="imc.html" class="neon-link">IMC</a>
  </div>
</header>

<!-- Servicios -->
<section id="servicios">
  <h2 style="text-align:center;font-size:1.8rem;margin-bottom:25px;">Servicios</h2>
  <div class="grid">
    <div class="card"><i class="fas fa-bowl-food" style="color:#00ffc0;"></i><h3>Planes Personalizados</h3><p>Adaptados a tu estilo de vida y objetivos.</p></div>
    <div class="card"><i class="fas fa-person-running" style="color:#00bfff;"></i><h3>Asesor√≠a Deportiva</h3><p>Optimiza tu rendimiento y recuperaci√≥n.</p></div>
    <div class="card"><i class="fas fa-scale-balanced" style="color:#ffbf00;"></i><h3>P√©rdida de Peso</h3><p>Programas sostenibles y personalizados.</p></div>
    <div class="card"><i class="fas fa-laptop" style="color:#ff00c8;"></i><h3>Consultas Online</h3><p>Asesor√≠a desde la comodidad de tu hogar.</p></div>
  </div>
</section>

<!-- =========================== -->
<!-- OFERTA LIMITADA + GARANT√çA + FAQ + LEAD MAGNET -->
<!-- =========================== -->

<section id="oferta-limitada">
  <h2 style="text-align:center;font-size:1.8rem;margin-bottom:25px;">üî• Oferta Especial Solo por Hoy üî•</h2>
  <div class="grid">
    <div class="card subscription-card premium">
      <h3>Suscripci√≥n Anual -10%</h3>
      <p style="font-size:1.6rem;font-weight:700;">‚Ç¨314 / 12 meses</p>
      <ul style="text-align:left; margin:15px 0; padding-left:20px; line-height:1.5;">
        <li>Acceso completo a todos los planes</li>
        <li>Soporte prioritario 24/7</li>
        <li>Descuento exclusivo solo hoy</li>
      </ul>
      <button onclick="openModalPlan('Suscripci√≥n Anual')">¬°APROVECHAR AHORA!</button>
    </div>
  </div>
  <p id="contador" style="text-align:center; margin-top:15px; color:#ffbf00; font-weight:600;">Quedan solo 5 cupos</p>
</section>

<section id="garantia">
  <h2 style="text-align:center;font-size:1.8rem;margin-bottom:25px;">‚úÖ Garant√≠a de Resultados</h2>
  <div class="grid">
    <div class="card"><i class="fas fa-shield-alt" style="color:#00ffc0;"></i>
      <h3>100% Seguro</h3>
      <p>Si no ves resultados en 30 d√≠as, te devolvemos tu dinero.</p>
    </div>
    <div class="card"><i class="fas fa-thumbs-up" style="color:#ffbf00;"></i>
      <h3>Confianza Total</h3>
      <p>M√°s de 200 transformaciones exitosas certifican nuestro m√©todo.</p>
    </div>
    <div class="card"><i class="fas fa-user-check" style="color:#00bfff;"></i>
      <h3>Profesional Certificado</h3>
      <p>Gerard Valls, experto en nutrici√≥n, con asesor√≠a personalizada.</p>
    </div>
  </div>
</section>

<section id="faq">
  <h2 style="text-align:center;font-size:1.8rem;margin-bottom:25px;">‚ùì Preguntas Frecuentes</h2>
  <div class="grid">
    <div class="card">
      <h3>¬øPuedo cancelar cuando quiera?</h3>
      <p>S√≠, las suscripciones mensuales y trimestrales pueden cancelarse en cualquier momento sin penalizaci√≥n.</p>
    </div>
    <div class="card">
      <h3>¬øEs necesario asistir presencialmente?</h3>
      <p>No, todos los planes incluyen consultor√≠a online y seguimiento digital.</p>
    </div>
    <div class="card">
      <h3>¬øRecibir√© un plan personalizado?</h3>
      <p>S√≠, todos los planes se adaptan a tus objetivos, estilo de vida y necesidades nutricionales.</p>
    </div>
  </div>
</section>

<section id="lead-magnet">
  <h2 style="text-align:center;font-size:1.8rem;margin-bottom:25px;">üéÅ Descarga Gratis</h2>
  <p style="text-align:center;">Recibe la gu√≠a <strong>"10 Claves para Perder Grasa y Ganar M√∫sculo"</strong> directamente en tu correo.</p>
  <div style="text-align:center; margin-top:20px;">
    <input type="email" id="lead-email" placeholder="Tu correo electr√≥nico" style="padding:12px; border-radius:20px; border:none; width:250px;">
    <button id="lead-btn" style="padding:12px 25px; border-radius:20px; background:#00ffc0; color:#000; font-weight:600; margin-left:10px;">Descargar</button>
  </div>
</section>

<!-- Suscripciones -->
<section id="suscripciones">
  <h2 style="text-align:center;font-size:1.8rem;margin-bottom:40px;">Planes de Suscripci√≥n</h2>
  <div class="grid">
    <div class="card subscription-card premium">
      <h3>Suscripci√≥n Anual</h3>
      <p style="font-size:1.6rem;font-weight:700;">‚Ç¨349 / 12 meses</p>
      <ul style="text-align:left; margin:15px 0; padding-left:20px; line-height:1.5;">
        <li><em>*Facturado anualmente</em></li>
        <li>Mejor valor</li>
        <li>Acceso completo a todos los planes</li>
        <li>Soporte 24/7</li>
      </ul>
      <button>√öNETE AHORA</button>
    </div>
    <div class="card subscription-card">
      <h3>Suscripci√≥n Trimestral</h3>
      <p style="font-size:1.5rem;font-weight:700;">‚Ç¨119 / 3 meses</p>
      <ul style="text-align:left; margin:15px 0; padding-left:20px; line-height:1.5;">
        <li><em>*Facturado trimestral</em></li>
        <li>Plan flexible</li>
        <li>Actualizaci√≥n peri√≥dica</li>
        <li>Soporte online</li>
      </ul>
      <button>√öNETE AHORA</button>
    </div>
    <div class="card subscription-card">
      <h3>Suscripci√≥n Mensual</h3>
      <p style="font-size:1.5rem;font-weight:700;">‚Ç¨49 / mes</p>
      <ul style="text-align:left; margin:15px 0; padding-left:20px; line-height:1.5;">
        <li><em>*Facturado mensualmente</em></li>
        <li>Acceso mensual</li>
        <li>Ideal para probar</li>
        <li>Soporte b√°sico</li>
      </ul>
      <button>√öNETE AHORA</button>
    </div>
  </div>
</section>

<!-- Resultados -->
<section id="resultados">
  <h2 style="text-align:center;font-size:1.8rem;margin-bottom:25px;">Impacto Real Medible</h2>
  <div class="grid">
    <div class="card"><h3>+200</h3><p>Transformaciones</p></div>
    <div class="card"><h3>+1.500 kg</h3><p>Grasa perdida</p></div>
    <div class="card"><h3>92%</h3><p>Adherencia</p></div>
    <div class="card"><h3>4.9/5 ‚≠ê</h3><p>Satisfacci√≥n</p></div>
  </div>
</section>

<!-- Testimonios -->
<section id="testimonios">
  <h2 style="text-align:center;font-size:1.8rem;margin-bottom:25px;">Testimonios</h2>
  <div class="grid">
    <div class="card"><p>‚ÄúMe cambi√≥ la vida, baj√© 10 kg en 3 meses‚Äù</p><h4>- Ana R.</h4></div>
    <div class="card"><p>‚ÄúGan√© m√∫sculo sin perder sabor en mi dieta‚Äù</p><h4>- Luis M.</h4></div>
    <div class="card"><p>‚ÄúAsesor√≠a profesional y cercana‚Äù</p><h4>- Carla P.</h4></div>
  </div>
</section>

<!-- Footer -->
<footer>
  ¬© 2026 Gerard Valls - Nutrici√≥n Profesional
</footer>

<!-- Modal Unificado -->
<div id="modal-unificado" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; 
    background: rgba(0,0,0,0.85); display:flex; justify-content:center; align-items:center; z-index:2000; transition: opacity 0.3s ease;">
  <form id="form-unificado" class="premium-modal" data-stripe-plan="">
    <h3 id="modal-title">Oferta Especial EMS</h3>
    <input type="text" name="nombre" placeholder="Nombre completo" required>
    <input type="email" name="email" placeholder="Correo electr√≥nico" required>
    <input type="text" name="plan" id="plan-input" readonly>
    <button type="submit">Enviar y Pagar</button>
    <button type="button" id="close-unificado">Cerrar</button>
  </form>
</div>

<!-- Scripts -->
<script>
let scene = new THREE.Scene();
let camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.set(0,1.5,5);
let renderer = new THREE.WebGLRenderer({antialias:true, alpha:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

let ambient = new THREE.AmbientLight(0xffffff,0.6); scene.add(ambient);
let point = new THREE.PointLight(0xffbf00,1.2); point.position.set(5,5,5); scene.add(point);
let geometry = new THREE.TorusKnotGeometry(0.7,0.2,128,32);
let material = new THREE.MeshStandardMaterial({color:0x00ffc0, metalness:0.7, roughness:0.2});
let torus = new THREE.Mesh(geometry, material); scene.add(torus);

let composer = new THREE.EffectComposer(renderer); composer.addPass(new THREE.RenderPass(scene,camera));
let bloom = new THREE.UnrealBloomPass(new THREE.Vector2(window.innerWidth,window.innerHeight),1.2,0.4,0.85);
composer.addPass(bloom);

let controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true; controls.enabled = window.innerWidth > 768;

gsap.to(torus.rotation, {y:Math.PI*2, duration:20, repeat:-1, ease:"linear"});
gsap.utils.toArray("section").forEach(sec=>{
  gsap.from(sec,{opacity:0,y:50,duration:1,scrollTrigger:{trigger:sec,start:"top 80%",toggleActions:"play none none reverse"}});
});

function animate(){ requestAnimationFrame(animate); torus.rotation.x+=0.002; torus.rotation.y+=0.003; controls.update(); composer.render(); }
animate();

function bloquearScroll(){ document.body.style.overflow='hidden'; }
function liberarScroll(){ document.body.style.overflow=''; }

const modal = document.getElementById("modal-unificado");
const form = document.getElementById("form-unificado");
const closeBtn = document.getElementById("close-unificado");

// Inicializa Stripe (pon tu public key)
const stripe = Stripe('TU_PUBLIC_KEY_STRIPE');

const stripePlans = {
  "Suscripci√≥n Anual": "price_1AnualXYZ",
  "Suscripci√≥n Trimestral": "price_1TrimestralXYZ",
  "Suscripci√≥n Mensual": "price_1MensualXYZ"
};

// Funci√≥n para abrir el modal con t√≠tulo y plan
function abrirModal(planName) {
  document.getElementById("modal-title").textContent = planName;
  document.getElementById("plan-input").value = planName;
  form.dataset.stripePlan = stripePlans[planName] || "";
  modal.style.display = "flex";
  setTimeout(() => {
    modal.style.opacity = "1";
    form.style.transform = "scale(1)";
  }, 50);
  document.body.style.overflow = 'hidden'; // Bloquea scroll
}

function cerrarModal() {
  modal.style.opacity = "0";
  form.style.transform = "scale(0.9)";
  setTimeout(() => {
    modal.style.display = "none";
    document.body.style.overflow = ''; // Libera scroll
    form.reset(); // Limpiar formulario si quieres
  }, 300);
}

document.getElementById("close-unificado").addEventListener("click", cerrarModal);
modal.addEventListener("click", e=>{ if(e.target===modal) cerrarModal(); });

document.addEventListener("DOMContentLoaded", ()=>{
  modal.style.display="flex";
  modal.style.opacity="1";
  modal.querySelector(".premium-modal").style.transform="scale(1)";
  document.getElementById("modal-title").textContent = "Oferta Especial del Mes";
  document.getElementById("plan-input").value = "Solo este mes 10% de descuento";
  form.dataset.stripePlan = "";
  bloquearScroll();
});

document.querySelectorAll(".subscription-card button").forEach(btn=>{
  btn.addEventListener("click", ()=>{
    const planName = btn.closest(".subscription-card").querySelector("h3").textContent;
    document.getElementById("modal-title").textContent = planName;
    document.getElementById("plan-input").value = planName;
    form.dataset.stripePlan = stripePlans[planName];
    modal.style.display="flex";
    modal.style.opacity="1";
    modal.querySelector(".premium-modal").style.transform="scale(1)";
    bloquearScroll();
  });
});

form.addEventListener("submit", async e=>{
  e.preventDefault();
  const planID = form.dataset.stripePlan;
  const nombre = e.target.nombre.value;
  const email = e.target.email.value;

  fetch("https://formspree.io/f/YOUR_FORM_ID", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body: JSON.stringify({ nombre, email, plan:document.getElementById("plan-input").value })
  }).catch(err=>console.log("Error Formspree:",err));

  if(planID){
    const {error} = await stripe.redirectToCheckout({
      lineItems:[{ price:planID, quantity:1 }],
      mode:'payment',
      successUrl:window.location.href+'?success=true',
      cancelUrl:window.location.href+'?cancel=true',
      customerEmail:email
    });
    if(error){ console.error(error); alert("Hubo un error al redirigir a Stripe. Intenta de nuevo."); }
  }

  cerrarModal();
});

function openModalPlan(planName){
  document.getElementById("modal-title").textContent = planName;
  document.getElementById("plan-input").value = planName;
  form.dataset.stripePlan = stripePlans[planName] || "";
  modal.style.display="flex";
  modal.style.opacity="1";
  modal.querySelector(".premium-modal").style.transform="scale(1)";
  bloquearScroll();
}

document.getElementById("lead-btn").addEventListener("click", ()=>{
  const email = document.getElementById("lead-email").value;
  if(!email){ alert("Ingresa tu correo"); return; }
  fetch("https://formspree.io/f/YOUR_FORM_ID", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body: JSON.stringify({ nombre:"Lead Magnet", email, plan:"Gu√≠a Gratis" })
  }).then(()=> alert("¬°Gracias! Revisa tu correo para descargar la gu√≠a"))
    .catch(()=> alert("Ocurri√≥ un error, intenta de nuevo"));
});

let cupos = 5;
setInterval(()=>{
  if(cupos>0){
    cupos--;
    document.getElementById("contador").textContent = `Quedan solo ${cupos} cupos`;
  }
}, 60000);
</script>
</body>
</html>
